---
title: Building and Deploying a Gasless Paymaster  
description: Learn how to build, and deploy, a Gasless Paymaster on ZKsync using Foundry-ZKsync.  

---

### **Setting Up Your Project**  

In this guide, we will set up

## **Project Initialization**  

To get started, **clone the template repository** into a new project folder called `l1-l2-tutorial`:  

```sh
git clone
```

This template includes the **basic Foundry setup** needed to begin development. Hereâ€™s what youâ€™ll find inside:  

### **Whatâ€™s Missing?**  

The template does not yet include:  

âœ…

Weâ€™ll add these components next.  

## **Installing Dependencies**  

To implement a Gasless Paymaster, we need a few key dependencies:  

- **`@zksync-contracts`** â€“ Provides interfaces for interacting with ZKsync-specific smart contracts.

### **Installing Dependencies with Soldeer**  

For dependency management, we will use [Soldeer](https://soldeer.xyz/), a **dedicated Solidity package manager**. If you
prefer, you can install dependencies via Git submodules using `forge install matter-labs/v2-testnet-contracts@beta`.

However, for this guide, we will use **Soldeer** to install our required packages:

```sh
cd l1-l2-tutorial
forge soldeer install @zksync-contracts~0.0.1
```

### **What This Command Does:**  

- Creates a `dependencies/` folder to store the installed packages.  
- Installs `@zksync-contracts`, `@openzeppelin-contracts`, and `forge-zksync-std`.  
- Generates a `remappings.txt` file for clean import paths, simplifying contract development.  

With our project set up and dependencies installed, we are now ready to **write and deploy our Gasless Paymaster contract**! ðŸš€

### Contract Code

Next, create a new file for our L1AccessKey contract called `L1AccessKey.sol`.

```sh
touch src/L1AccessKey.sol
```

Copy and paste the full contract below into the file.

::drop-panel
::panel{label="L1AccessKey.sol"}

```solidity [src/L1AccessKey.sol]
:code-import{filePath=""}
```

::
::

### Understanding the `L1AccessKey` Contract  

Let's break down the `L1AccessKey` contract and explain how it works.  

### **Contract Overview**  

## **Key Components**  

### **Constructor Function**  

### **Functions**  

#### `validateAndPayForPaymasterTransaction`  

```solidity

```

**How it works:**  

1.

2.

3.
4.

## Deploying Contracts

Create a new file in the `script` directory:

```bash
touch script/.s.sol
```

Copy and paste the deploy script:

```solidity [script/.s.sol]
:code-import{filePath=""}
```

### Understanding the `.s.sol` Deployment Script
  
## **Key Components**  

### **Variables**  

### **The `run` Function**  

#### **Step 1: Start Transaction Broadcasting**  

```solidity
vm.startBroadcast();
```

- **`startBroadcast()`** allows the script to execute transactions as the sender (`msg.sender`).  
- This ensures that contract deployments and transactions are properly recorded.

### **Step 2: Deploy and Fund the  using CREATE2**  

#### **Using CREATE2 for Predictable Deployment Addresses**  

```solidity
 = new {salt: "1234"}(msg.sender);
```

### **Deploying to a Local Anvil-ZKsync Instance**  

`anvil-zksync` is included with Foundry-ZKsync, providing an easy way to run a local ZKsync node.
This allows for fast and efficient contract deployment and testing without interacting with a live network.  

#### **Starting the Local Node**  

To start an `anvil-zksync` instance, run:  

```bash
anvil-zksync -vv --spawn-l1
```

This will launch a local ZKsync environment and display a list of pre-funded accounts:  

```bash
Rich Accounts
==================

(0) 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 (10000 ETH)
...

Private Keys
==================

(0) 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
...
```

These accounts can be used for deploying contracts and making transactions.  

### **Running the Deployment Script**  

With the local node running, open a new terminal window and execute the deployment script:  

```bash
forge script script/GaslessPaymaster.s.sol --zksync --slow --rpc-url anvil-zksync --broadcast --interactive 1
```

This script will:  

1.  

After running the script, you will be prompted to enter a private key. Select one from the list displayed when launching `anvil-zksync`:  

```bash
Enter private key: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
```

### **Successful Script Execution Output**  

If the deployment is successful, you should see output similar to this:  

```bash
.
```

This confirms that:  

-

---

### **Next Steps: Interacting with the Paymaster**  

Now that we have deployed and validated the GaslessPaymaster, the next step is to demonstrate
how **users can interact with it** to execute transactions **without paying gas fees** using `cast`. ðŸš€
